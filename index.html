class ColorCashGame {
  constructor(initialBalance = 100) {
    this.balance = initialBalance;
    this.history = [];
  }

  // Play a round with the chosen color
  play(color, betAmount) {
    if (betAmount <= 0 || betAmount > this.balance) {
      return `Invalid bet amount. Your balance is $${this.balance}.`;
    }

    // Calculate result based on color probabilities
    const roll = Math.random();
    let winAmount = 0;
    let outcome = '';
    
    switch(color.toLowerCase()) {
      case 'green':
        // 60% chance to win 1.5x
        if (roll < 0.6) {
          winAmount = betAmount * 0.5;
          outcome = 'win';
        } else {
          winAmount = -betAmount;
          outcome = 'loss';
        }
        break;
      case 'red':
        // 30% chance to win 3x
        if (roll < 0.3) {
          winAmount = betAmount * 2;
          outcome = 'win';
        } else {
          winAmount = -betAmount;
          outcome = 'loss';
        }
        break;
      case 'gold':
        // 10% chance to win 10x
        if (roll < 0.1) {
          winAmount = betAmount * 9;
          outcome = 'win';
        } else {
          winAmount = -betAmount;
          outcome = 'loss';
        }
        break;
      default:
        return "Invalid color. Please choose green, red, or gold.";
    }

    // Update balance
    this.balance += winAmount;
    
    // Record history
    this.history.push({
      color,
      betAmount,
      outcome,
      winAmount,
      newBalance: this.balance
    });

    // Return result
    if (outcome === 'win') {
      return `You chose ${color} and WON $${winAmount.toFixed(2)}! Your new balance is $${this.balance.toFixed(2)}.`;
    } else {
      return `You chose ${color} and lost $${betAmount.toFixed(2)}. Your new balance is $${this.balance.toFixed(2)}.`;
    }
  }

  // Get game statistics
  getStats() {
    if (this.history.length === 0) {
      return "No games played yet.";
    }
    
    const totalGames = this.history.length;
    const wins = this.history.filter(game => game.outcome === 'win').length;
    const netProfit = this.balance - 100; // Assuming starting balance was 100
    
    return `Games played: ${totalGames}
Win rate: ${((wins/totalGames)*100).toFixed(1)}%
Net profit: $${netProfit.toFixed(2)}`;
  }
}

// Example usage:
const game = new ColorCashGame();
console.log("Welcome to Color Cash Game!");
console.log("Starting balance: $100");
console.log("Choose your color:");
console.log("- GREEN: Safe bet (60% chance to win 1.5x your bet)");
console.log("- RED: Risky bet (30% chance to win 3x your bet)");
console.log("- GOLD: Rare jackpot (10% chance to win 10x your bet)");
